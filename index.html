<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Professional Note Transformer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Lucide icons inline (no npm needed)
    const Icon = ({ d, size = 24, className = "" }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24"
        fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"
        className={className}>
        {Array.isArray(d) ? d.map((path, i) => <path key={i} d={path} />) : <path d={d} />}
      </svg>
    );
    const Copy = (p) => <Icon {...p} d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M16 4h2a2 2 0 0 1 2 2v4M12 2h4l1 1v4h-4l-1-1z" />;
    const FileText = (p) => <Icon {...p} d={["M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","M14 2v6h6","M16 13H8","M16 17H8","M10 9H8"]} />;
    const MessageSquare = (p) => <Icon {...p} d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />;
    const Mail = (p) => <Icon {...p} d={["M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z","M22 6l-10 7L2 6"]} />;
    const Calendar = (p) => <Icon {...p} d={["M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z","M16 2v4","M8 2v4","M3 10h18"]} />;
    const Clock = (p) => <Icon {...p} d={["M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z","M12 6v6l4 2"]} />;
    const User = (p) => <Icon {...p} d={["M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2","M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"]} />;
    const Building = (p) => <Icon {...p} d={["M6 2h12a2 2 0 0 1 2 2v18H4V4a2 2 0 0 1 2-2z","M9 22V12h6v10","M9 7h1","M14 7h1","M9 11h1","M14 11h1"]} />;

    const TRANSLATIONS = {
      "en-US": {
        "appTitle": "Professional Note Transformer",
        "appDescription": "Transform raw notes into polished, professional formats",
        "interviewNotes": "Interview Notes",
        "meetingNotes": "Meeting Notes",
        "input": "Input",
        "context": "Context",
        "position": "Position",
        "candidateName": "Candidate Name",
        "interviewType": "Interview Type",
        "duration": "Duration",
        "meetingTitle": "Meeting Title",
        "attendees": "Attendees",
        "date": "Date",
        "rawNotes": "Raw Notes",
        "rawNotesPlaceholder": "Enter your raw notes here...",
        "outputFormat": "Output Format",
        "evaluationScorecard": "Evaluation Scorecard",
        "slackUpdate": "Slack Update",
        "emailSummary": "Email Summary",
        "googleDoc": "Google Doc",
        "transforming": "Transforming...",
        "transformNotes": "Transform Notes",
        "output": "Output",
        "copy": "Copy",
        "transformedNotesPlaceholder": "Transformed notes will appear here"
      },
      "es-ES": {
        "appTitle": "Transformador Profesional de Notas",
        "appDescription": "Transforma notas sin procesar en formatos profesionales pulidos",
        "interviewNotes": "Notas de Entrevista",
        "meetingNotes": "Notas de Reunión",
        "input": "Entrada",
        "context": "Contexto",
        "position": "Posición",
        "candidateName": "Nombre del Candidato",
        "interviewType": "Tipo de Entrevista",
        "duration": "Duración",
        "meetingTitle": "Título de la Reunión",
        "attendees": "Asistentes",
        "date": "Fecha",
        "rawNotes": "Notas Sin Procesar",
        "rawNotesPlaceholder": "Ingresa tus notas sin procesar aquí...",
        "outputFormat": "Formato de Salida",
        "evaluationScorecard": "Tarjeta de Evaluación",
        "slackUpdate": "Actualización de Slack",
        "emailSummary": "Resumen de Email",
        "googleDoc": "Documento de Google",
        "transforming": "Transformando...",
        "transformNotes": "Transformar Notas",
        "output": "Salida",
        "copy": "Copiar",
        "transformedNotesPlaceholder": "Las notas transformadas aparecerán aquí"
      }
    };

    const browserLocale = navigator.languages?.[0] || navigator.language || 'en-US';
    const findMatchingLocale = (locale) => {
      if (TRANSLATIONS[locale]) return locale;
      const lang = locale.split('-')[0];
      const match = Object.keys(TRANSLATIONS).find(key => key.startsWith(lang + '-'));
      return match || 'en-US';
    };
    const locale = findMatchingLocale(browserLocale);
    const t = (key) => TRANSLATIONS[locale]?.[key] || TRANSLATIONS['en-US'][key] || key;

    const NoteTransformer = () => {
      const [noteType, setNoteType] = React.useState('interview');
      const [context, setContext] = React.useState({
        interview: { position: '', candidate: '', interviewType: '', duration: '' },
        meeting: { title: '', attendees: '', date: '', duration: '' }
      });
      const [rawNotes, setRawNotes] = React.useState('');
      const [finalUseCase, setFinalUseCase] = React.useState('');
      const [output, setOutput] = React.useState('');
      const [isTransforming, setIsTransforming] = React.useState(false);

      const useCaseOptions = {
        interview: [
          { value: 'evaluation', label: t('evaluationScorecard'), icon: FileText },
          { value: 'slack', label: t('slackUpdate'), icon: MessageSquare },
          { value: 'email', label: t('emailSummary'), icon: Mail }
        ],
        meeting: [
          { value: 'googledoc', label: t('googleDoc'), icon: FileText },
          { value: 'slack', label: t('slackUpdate'), icon: MessageSquare },
          { value: 'email', label: t('emailSummary'), icon: Mail }
        ]
      };

      const contextFields = {
        interview: [
          { key: 'position', label: t('position'), icon: Building },
          { key: 'candidate', label: t('candidateName'), icon: User },
          { key: 'interviewType', label: t('interviewType'), icon: Calendar },
          { key: 'duration', label: t('duration'), icon: Clock }
        ],
        meeting: [
          { key: 'title', label: t('meetingTitle'), icon: Building },
          { key: 'attendees', label: t('attendees'), icon: User },
          { key: 'date', label: t('date'), icon: Calendar },
          { key: 'duration', label: t('duration'), icon: Clock }
        ]
      };

      const handleContextChange = (field, value) => {
        setContext(prev => ({ ...prev, [noteType]: { ...prev[noteType], [field]: value } }));
      };

      const getTransformationPrompt = () => {
        const currentContext = context[noteType];
        const contextString = Object.entries(currentContext).map(([key, value]) => `${key}: ${value}`).join(', ');
        return `Please respond in ${locale} language. Transform the following raw notes into a professional ${finalUseCase} format.\n\nContext: ${contextString}\n\nRaw Notes:\n${rawNotes}\n\nInstructions:\n- Expand abbreviations naturally\n- Maintain the original meaning and content\n- Structure appropriately for ${finalUseCase}\n- Use professional language while preserving key details\n- Keep the tone appropriate for the intended use case\n\nFormat the output as a ${finalUseCase} would appear in a professional setting.`;
      };

      const transformNotes = async () => {
        if (!rawNotes.trim()) return;
        setIsTransforming(true);
        try {
          const response = await fetch("https://api.anthropic.com/v1/messages", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              model: "claude-sonnet-4-20250514",
              max_tokens: 2000,
              messages: [{ role: "user", content: getTransformationPrompt() }]
            })
          });
          if (!response.ok) throw new Error(`API request failed: ${response.status}`);
          const data = await response.json();
          setOutput(data.content[0].text);
        } catch (error) {
          setOutput("Error: Unable to transform notes. Please try again.");
        } finally {
          setIsTransforming(false);
        }
      };

      const copyToClipboard = async () => {
        try { await navigator.clipboard.writeText(output); } catch (err) { console.error('Failed to copy:', err); }
      };

      return (
        <div className="min-h-screen bg-gray-50 p-6">
          <div className="max-w-7xl mx-auto">
            <div className="mb-8">
              <h1 className="text-3xl font-bold text-gray-900 mb-2">{t('appTitle')}</h1>
              <p className="text-gray-600">{t('appDescription')}</p>
            </div>
            <div className="mb-6">
              <div className="bg-gray-100 p-1 rounded-lg inline-flex">
                <button onClick={() => setNoteType('interview')} className={`px-6 py-2 rounded-md font-medium transition-all duration-200 ${noteType === 'interview' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600 hover:text-gray-800'}`}>
                  {t('interviewNotes')}
                </button>
                <button onClick={() => setNoteType('meeting')} className={`px-6 py-2 rounded-md font-medium transition-all duration-200 ${noteType === 'meeting' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600 hover:text-gray-800'}`}>
                  {t('meetingNotes')}
                </button>
              </div>
            </div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div className="space-y-6">
                <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                  <h2 className="text-xl font-semibold text-gray-900 mb-4">{t('input')}</h2>
                  <div className="space-y-4 mb-6">
                    <h3 className="text-lg font-medium text-gray-800">{t('context')}</h3>
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      {contextFields[noteType].map(field => {
                        const IconComp = field.icon;
                        return (
                          <div key={field.key} className="relative">
                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                              <IconComp size={20} className="text-gray-400" />
                            </div>
                            <input type="text" placeholder={field.label} value={context[noteType][field.key]}
                              onChange={(e) => handleContextChange(field.key, e.target.value)}
                              className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                          </div>
                        );
                      })}
                    </div>
                  </div>
                  <div className="space-y-4">
                    <h3 className="text-lg font-medium text-gray-800">{t('rawNotes')}</h3>
                    <textarea value={rawNotes} onChange={(e) => setRawNotes(e.target.value)}
                      placeholder={t('rawNotesPlaceholder')} rows={12}
                      className="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" />
                  </div>
                  <div className="space-y-4 mt-4">
                    <h3 className="text-lg font-medium text-gray-800">{t('outputFormat')}</h3>
                    <div className="flex flex-wrap gap-2">
                      {useCaseOptions[noteType].map(option => {
                        const IconComp = option.icon;
                        return (
                          <button key={option.value} onClick={() => setFinalUseCase(option.value)}
                            className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${finalUseCase === option.value ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>
                            <IconComp size={16} />
                            <span>{option.label}</span>
                          </button>
                        );
                      })}
                    </div>
                  </div>
                  <button onClick={transformNotes} disabled={!rawNotes.trim() || isTransforming}
                    className="w-full mt-6 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors">
                    {isTransforming ? t('transforming') : t('transformNotes')}
                  </button>
                </div>
              </div>
              <div className="space-y-6">
                <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-xl font-semibold text-gray-900">{t('output')}</h2>
                    {output && (
                      <button onClick={copyToClipboard} className="flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium">
                        <Copy size={16} />
                        <span>{t('copy')}</span>
                      </button>
                    )}
                  </div>
                  <div className="min-h-96 p-4 bg-gray-50 rounded-lg border border-gray-200">
                    {output ? (
                      <div className="whitespace-pre-wrap text-gray-800 leading-relaxed">{output}</div>
                    ) : (
                      <div className="text-gray-500 text-center py-20">
                        <FileText size={48} className="mx-auto mb-4 text-gray-400" />
                        <p>{t('transformedNotesPlaceholder')}</p>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NoteTransformer />);
  </script>
</body>
</html>
